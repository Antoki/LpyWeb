{% extends "index.html" %}

{% block title %} L-Py Editor {% endblock %}
	
{% block body %}
<body onload="Init();">		
	<form action={{ interpreter }} method="post">
{% endblock %}

{% block editor %}{% endblock %}
<!--{% block sidebar %}<button class="btn btn-dark toggle-sidebar" type="button"><i class="fas fa-sliders-h"></i></button>{% endblock %}-->

{% block content %}
	<div class="row" id="row-main">
		<div class="col-md-1" id="sidebar">
			<div id="sidebarTitle">Actions</div>
			<input type="file" id="hiddenButton"/>
			<button type="button" class="btn btn-primary btn-block" id="import" alt="Import a .lpy file." title="Import a .lpy file." 
			onclick="upload();"><i class="fas fa-file-upload"></i> Import</button>
			<button type="button" class="btn btn-danger btn-block" id="download" alt="Save your program in a .lpy file and download it." 
			title="Save your program in a .lpy file and download it."><i class="fas fa-save"></i> Save</button>
			<button type="submit" class="btn btn-success btn-block" id="submitCode" alt="Run your program and display the render." 
			title="Run your program and display the render."><i class="fas fa-play"></i> Simulate</button>
		</div>
		<div class="col-md-5 flex-column">
			<textarea  placeholder="Axiom and rules" type="text" name="code" rows=40 cols=82 wrap=off>{{code}}</textarea>
			<div id="code"></div>
		</div>
		<canvas class="col-md-6 flex-column" width="auto" height="auto" id="renderCanvas">
			<p id=htmlLString>{{ name }}</p>
		</canvas>
	</div>
{% endblock %}

{% block script %}
	<script>
		function upload() {
			document.getElementById('hiddenButton').click();
		}

    	var editor = ace.edit("code");
    	var textarea = $('textarea[name="code"]').hide();

    	document.getElementById('code').style.fontSize='16px';
    	editor.setTheme("ace/theme/monokai");
    	editor.session.setMode("ace/mode/python");
    	editor.getSession().setValue(textarea.val());
    	editor.getSession().on('change', function(){
  			textarea.val(editor.getSession().getValue());
		});

</script>
	</script>
{% endblock %}